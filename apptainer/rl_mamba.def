Bootstrap: docker
From: mambaorg/micromamba

%files
    environment.yml
    gym_talos
    config
    pyproject.toml
    poetry.lock
    README.md

%post
    micromamba env create -f environment.yml
    micromamba clean --all --yes
    micromamba run -n talos-rl python -m pip install pipx
    micromamba run -n talos-rl python -m pipx install poetry
    micromamba run -n talos-rl /root/.local/bin/poetry install --without deps

%runscript
    exec micromamba run -n talos-rl python -m gym_talos -config /config/config_RL.yaml
